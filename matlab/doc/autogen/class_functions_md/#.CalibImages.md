# Class: CalibImages



    
    CalibImages class - A class for storing calibration image, and performs  
    the basic calibration steps on images.  
    Description: Each element of this class may contain all the calibration  
    images for a single detector or a section of a detector.  
    This allows performing calibration for multiple detectors  
    simultaneously.  
      
    use case:  
    1. create dark/bias/flat/fringe  
    bias  
    dark  
    flat  
    fringe  
    2. save to disk/db  
    writeImages  
    write2DB  
    3. upload from disk/db  
    readImages - read calibration images from disk  
    searchDB - search recent calibration files  
    4. apply calib on image  
    Each calib element corresond to one sub/image  
    debias  
    dedark  
    deflat  
    defringe  
    maskSaturated  
    calibrate (do all)  
      
      
### CalibImages




    
      
      
### calibrate

Perform basic calibration (bias, flat, etc) to input images Perform the following steps on an image: Create a mask image Flag staturated pixels in mask


    
    Perform basic calibration (bias, flat, etc) to input images  
    Perform the following steps on an image:  
    Create a mask image  
    Flag staturated pixels in mask  
    Subtract bias image  
    Subtract and remove overscan from image  
    Divide image by flat  
    Correct for fringing  
    Multiple image by gain  
    Input : - A CalibImages object.  
    Each element in the CalibImages must correspond to  
    an image in the AstroImage input object.  
    - An AstroImage object.  
    Number of elements must be equal to the number of  
    elements in the CalibImages object, or if the  
    CalibImages object is of size=1, then this may have  
    any size.  
    * ...,key,val,...  
    'CreateNewObj' - [], false, true. Default is [].  
    'BitDictinaryName' - Bit dictionary name.  
    Default is 'BitMask.Image.Default'.  
    'MaskSaturated' - A logical indicating if to flag  
    saturated pixels, in the Mask image.  
    Default is true.  
    'SubtractOverscan' - A logical indicating if to  
    subtract overscan. Default is true.  
    'CorrectFringing' - A logical indicating if to  
    correct for fringing. Default is false.  
    'MultiplyByGain' - A logical indicating if to set  
    gain to 1. Default is true.  
    'InterpolateOverNan' - A logical indicating if to  
    interpolate over NaN pixels.  
    Default is true.  
    'InterpolateOberSaturated' - A logical indicating if to  
    interpolate over saturated pixels.  
    Default is true.  
    'ArgsSaturation' - A cell array of additional  
    arguments to pass to imProc.mask.maskSaturated.  
    Default is true.  
    'ArgsDebias' - A cell array of additional  
    arguments to pass to imProc.dark.debias.  
    Default is true.  
    'ArgsOverScan' - A cell array of additional  
    arguments to pass to imProc.dark.overscan.  
    Default is true.  
    'ArgsDeflat' - A cell array of additional  
    arguments to pass to imProc.flat.deflat.  
    Default is true.  
    'ArgsInterpOverNan' - A cell array of additional  
    arguments to pass to imProc.image.interpOverNan.  
    Default is true.  
    'Bitname_Saturated' - The bit name for saturated  
    pixels in the mask image dictionary.  
    Default is 'Saturated'.  
    Output : - The output AstroImage after calibration.  
    Author : Eran Ofek (Jul 2021)  
    Example:  
      
### checkObjImageSize

Check the validity of the size (number of elements) of CalibImages object and input image This function will return an error if not one of the following: size(Image)size(Obj) or (numel(Obj)1 and numel(Image)>1)');


    
    Check the validity of the size (number of elements) of CalibImages object and input image  
    This function will return an error if not one of the  
    following: size(Image)size(Obj) or (numel(Obj)1 and numel(Image)>1)');  
    Input  : - A CalibImages object.  
    - An AstroImage object  
    Output : - Number of elements in the CalibImages object.  
    - Number of elements in the AstroImage object.  
    Author : Eran Ofek (Jul 2021)  
      
### createBias

Create master bias using imProc.dark.bias and store in CalibImages object. Optionaly, can break the bias image to sub images and store them in different elements of the CalibImages object.


    
    Create master bias using imProc.dark.bias and store in CalibImages object.  
    Optionaly, can break the bias image to sub images and store  
    them in different elements of the CalibImages object.  
    Input  : - An CalibImages object  
    - A list of AstroImages, or a cell array of file  
    names, or a a template of file names (interpreted  
    using regular expressions).  
    * ...,key,val,...  
    'BiasArgs' - A cell array of additional arguments  
    to pass to the imProc.dark.bias function.  
    Default is {}.  
    'BlockSize' - Sub images block size to generate.  
    If empty, use the orginal image size and  
    return a single element CalibImages object.  
    Otherwise return multi-element CalibImages  
    object with a sub (bias) image per element.  
    'image2subimagesArgs' - A cell array of additional  
    arguments to pass to imProc.image.image2subimages  
    function. Default is {}.  
    Output : - A CalibImages object with the Bias field  
    populated. This is an handle to the original input  
    object.  
    Author : Eran Ofek (Jul 2021)  
    Example:  
      
### createFlat




    
### debias

Subtract bias image from an image and update mask.


    
    Subtract bias image from an image and update mask.  
    Input  : - A CalibImages object.  
    If this is a single-element object, then the bias  
    image will subtrcated from all input images.  
    If this is a multi-element object, then the input  
    must have the same number of elements, ane the  
    bias subtraction will be done element-by-element.  
    - An AstroImage object containing the input image  
    from which to subtract the bias image.  
    * ...,key,val,...  
    'CreateNewObj' - [], false, true.  
    See Base.createNewObj for details.  
    This referes to creation of a new copy of  
    the input AstroImage (not the CalibImages  
    object). Default is [].  
    Output : - The AstroImage object, from which the bias was  
    subtrcated.  
    See also: imProc.dark.debias  
    Author : Eran Ofek (Jul 2021)  
    Example: debias(Obj, Image)  
      
### overscan

Subtract and remove overscan bias from image.


    
    Subtract and remove overscan bias from image.  
    Input  : - A CalibImages object.  
    Not used.  
    - An AstroImage object containing the input image  
    from which to subtract the bias image.  
    * ...,key,val,...  
    'CreateNewObj' - [], false, true.  
    See Base.createNewObj for details.  
    This referes to creation of a new copy of  
    the input AstroImage (not the CalibImages  
    object). Default is [].  
    'OverScan' - Either an header keyword containing  
    the overscan region, or an [Xmin Xmax Ymin Ymax]  
    vector for the overscan.  
    Default is 'OVERSCAN'.  
    'Subtract' - A logical indicating if to subtract  
    the overscan from the image. Default is true.  
    'OverScanDir' - Indicating the direction of the overscan:  
    'x'|'y'|1|2| [].  
    See imProc.dark.overscan for details.  
    Default is [].  
    'Method' - Method by which to calculate the overscan:  
    See imProc.dark.overscan for details.  
    Default is 'globalmedian'.  
    'MethodArgs' - A cell array of additional  
    arguments to pass to the method.  
    (Defaults are defined for each medthod).  
    Output : - The AstroImage object, from which the overscan was  
    subtrcated and removed.  
    See also: imProc.dark.overscan  
    Author : Eran Ofek (Jul 2021)  
    Example:  
      
### readCalibImages




    
### set.Dark

setter for Dark property - set DarkExpTime+darkTemp from Header


    
    setter for Dark property - set DarkExpTime+darkTemp from  
    Header  
      
### set.Flat

setter for Flat property - set FlatFilter from Header


    
    setter for Flat property - set FlatFilter from Header  
      
### set.Fringe

setter for Fringe property - set FringeExpTime+FringeFilter from Header


    
    setter for Fringe property - set FringeExpTime+FringeFilter from  
    Header  
      
