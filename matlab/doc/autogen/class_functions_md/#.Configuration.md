# Class: Configuration



    
    Configuration class for YML files, based on Java.  
    Each yml file is loaded as struct under the Data property of the object.  
      
    There is a singleton configuration object which loads the system configuration.  
    Note: Since Configuration.getSingleton() uses persistant object,  
    in order to load fresh configuration you need to do 'clear all'  
      
    Usage:  
    Configuration may be used in two ways:  
    1. 'Global' configuration object (stored as singleton object), there is  
    always such Configuration object which is linked by default to  
    Component.Config when Component is created.  
      
    Global configuration is loaded from:  
    A. By environment variable ASTROPACK_CONFIG_PATH, and if not found  
    B. From the 'config/' folder inside the source code repository (i.e.,  
    '../../../config/')  
      
    Note that files under config/local folder are excluded from git.  
      
    2. User defined configuration object, may be used to load specific YML  
    files which are not part of the system configuration folder.  
      
    Each YML file is loaded to a property inside Obj.Data that match the YML  
    file name.  
    Example: config/unitTest.yml is loaded to struct Obj.Data.unittest.  
      
    Additional FileName property is added to the struct, to keep tracking of  
    which file was loaded, allowed a reload if required.  
      
    When you create a decended of Component, it has a Config property which  
    is linked to the singleton Configuration object.  
    The first instace of Component which is created triggers loading of the  
    system configuration.  
      
    Example:  Access global configuration from Component decendent:  
    Get the value of 'Key1' inside configuration file 'unittest.yml'.  
    This will load the entire configuration folder if not loaded yet.  
    Comp = Component  
    disp(Comp.Config.Data.unittest.Key1)  
      
    Example:  Access global configuration without Component:  
    Get the value of 'Key1' inside configuration file 'unittest.yml'.  
    This will load the entire configuration folder if not loaded yet.  
    disp(Configuration.getSingleton().Data.unittest.Key1)  
      
      
    Create/load configuration:  
    Configuration.load()  
      
    Reload entire system configuration:  
    Configuration.reload()  
      
      
    Working with user defined Configuration instances  
    (i.e. not using the global singleton object):  
      
    Private configuration file, load directly to Data  
      
    Example: Load unittest.yml to Data.unittest:  
    MyConf = Configuration;  
    MyConf.loadFile('c:/temp/unittest.yml');  
    disp(MyConf.Data.unittest.Key1)  
      
    Example: Load unittest.yml to Data:  
    MyConf = Configuration;  
    MyConf.loadFile('c:/temp/unittest.yml', 'Field', false);  
    disp(MyConf.Data.Key1)  
      
    Load entire folder (suppose you have two files, 'c:/temp/myconfig/unittest.yml'  
    and 'c:/temp/myconfig/anothertest.yml':  
    MyConf = Configuration;  
    MyConf.loadFolder('c:/temp/myconfig');  
    disp(MyConf.Data.unittest.Key1)  
    disp(MyConf.Data.anothertest.Key1)  
      
    Reload single configuration file:  
      
    Use online YAML validators to check your YML files:  
    http://www.yamllint.com/ (Use the GO button...)  
      
      
      
      
      

### Functions List

    Configuration - 
    expandFolder - Expand Path with macros from Configuration.System.EnvFolders This functions assume that we already loaded a configuration file called System.yml which has EnvFolders section.
    getRange - Get minimum and maximum values from cell array, assuming that cell{1} holds the minimum and cell{2} folds the maximum This is usefull when storing Example: [min, max] = conf.getRange(conf.Yaml.DarkImage.TemperatureRange)
    getSingleton - Return the singleton Configuration object, this is the 'Global' configuration object of the system
    getSysConfigPath - Get path to system configuration file, from ASTROPACK_CONFIG_PATH or repository
    initSysConfig - Return singleton Configuration object, clear entire configuration if argument is 'clear' This function DOES NOT load any configuration file, just create/clear the object
    internal_loadYaml - Read YAML file to struct, add FileName field
    internal_reloadYaml - Reload configuration file, YamlStruct.FileName property must exist FileName is created by Configuration.loadYaml() on loading.
    listLen - Return list length
    loadFile - Load specified file to new property inside Obj.Data. When Args.Field is true, a new property based on the file name will be created in Obj.Data Use this function when working with user Confguuration object, or when you want to explictly load/reload specific
    loadFolder - Load all configuration files inside the specified folder Each file is loaded to Obj.Data.FileName struct. Example: MyConfig = Configuration(); MyConfig.loadFile('C:/Temp/MyConfigFolder');
    loadSysConfig - Load entire system configuration, same as getSingleton()
    reload - Reload all configuration files from folder used by last call to loadFolder(), if Obj.Path is empty, it reloads existing structs by the stored FileName field Example: MyConfig.reloadFolder()
    reloadFile - Reload specified configuration object (file name) Call this function with the Example: MyConfig.reloadFile(MyConfig.Data.unittest)
    reloadSysConfig - Reload entire system configuration, Warning: calls 'clear java'
    unitTest - Configuration.unitTest
    unmacro - Replace macros in string with values from struct Example: Str="$Root/abc", MacrosStruct.Root="xyz" -> "xyz/abc" Configuration.unmacro(Component.Config.Data.DarkImage.InputFolder, Component.Config.Data.EnvFolders)

### Configuration




    


### expandFolder

Expand Path with macros from Configuration.System.EnvFolders This functions assume that we already loaded a configuration file called System.yml which has EnvFolders section.


    
    Expand Path with macros from Configuration.System.EnvFolders  
    This functions assume that we already loaded a configuration  
    file called System.yml which has EnvFolders section.  


### getRange

Get minimum and maximum values from cell array, assuming that cell{1} holds the minimum and cell{2} folds the maximum This is usefull when storing Example: [min, max] = conf.getRange(conf.Yaml.DarkImage.TemperatureRange)


    
    Get minimum and maximum values from cell array, assuming  
    that cell{1} holds the minimum and cell{2} folds the maximum  
    This is usefull when storing  
    Example: [min, max] = conf.getRange(conf.Yaml.DarkImage.TemperatureRange)  


### getSingleton

Return the singleton Configuration object, this is the 'Global' configuration object of the system


    
    Return the singleton Configuration object, this is the 'Global'  
    configuration object of the system  


### getSysConfigPath

Get path to system configuration file, from ASTROPACK_CONFIG_PATH or repository


    
    Get path to system configuration file, from  
    ASTROPACK_CONFIG_PATH or repository  
      


### initSysConfig

Return singleton Configuration object, clear entire configuration if argument is 'clear' This function DOES NOT load any configuration file, just create/clear the object


    
    Return singleton Configuration object, clear entire configuration if argument is 'clear'  
    This function DOES NOT load any configuration file, just create/clear the object  


### internal_loadYaml

Read YAML file to struct, add FileName field


    
    Read YAML file to struct, add FileName field  


### internal_reloadYaml

Reload configuration file, YamlStruct.FileName property must exist FileName is created by Configuration.loadYaml() on loading.


    
    Reload configuration file, YamlStruct.FileName property must exist  
    FileName is created by Configuration.loadYaml() on loading.  


### listLen

Return list length


    
    Return list length  


### loadFile

Load specified file to new property inside Obj.Data. When Args.Field is true, a new property based on the file name will be created in Obj.Data Use this function when working with user Confguuration object, or when you want to explictly load/reload specific


    
    Load specified file to new property inside Obj.Data.  
    When Args.Field is true, a new property based on the file  
    name will be created in Obj.Data  
    Use this function when working with user Confguuration  
    object, or when you want to explictly load/reload specific  
    file.  
    Example:  
    MyConfig = Configuration();  
    MyConfig.loadFile('C:/Temp/MyConfig.yml');  
      


### loadFolder

Load all configuration files inside the specified folder Each file is loaded to Obj.Data.FileName struct. Example: MyConfig = Configuration(); MyConfig.loadFile('C:/Temp/MyConfigFolder');


    
    Load all configuration files inside the specified folder  
    Each file is loaded to Obj.Data.FileName struct.  
    Example:  
    MyConfig = Configuration();  
    MyConfig.loadFile('C:/Temp/MyConfigFolder');  


### loadSysConfig

Load entire system configuration, same as getSingleton()


    
    Load entire system configuration, same as getSingleton()  


### reload

Reload all configuration files from folder used by last call to loadFolder(), if Obj.Path is empty, it reloads existing structs by the stored FileName field Example: MyConfig.reloadFolder()


    
    Reload all configuration files from folder used by last call  
    to loadFolder(), if Obj.Path is empty, it reloads existing  
    structs by the stored FileName field  
    Example: MyConfig.reloadFolder()  


### reloadFile

Reload specified configuration object (file name) Call this function with the Example: MyConfig.reloadFile(MyConfig.Data.unittest)


    
    Reload specified configuration object (file name)  
    Call this function with the  
    Example: MyConfig.reloadFile(MyConfig.Data.unittest)  


### reloadSysConfig

Reload entire system configuration, Warning: calls 'clear java'


    
    Reload entire system configuration, Warning: calls 'clear java'  


### unitTest

Configuration.unitTest


    
    Configuration.unitTest  
      


### unmacro

Replace macros in string with values from struct Example: Str="$Root/abc", MacrosStruct.Root="xyz" -> "xyz/abc" Configuration.unmacro(Component.Config.Data.DarkImage.InputFolder, Component.Config.Data.EnvFolders)


    
    Replace macros in string with values from struct  
    Example:  
    Str="$Root/abc", MacrosStruct.Root="xyz" -> "xyz/abc"  
    Configuration.unmacro(Component.Config.Data.DarkImage.InputFolder, Component.Config.Data.EnvFolders)  
      


