# Class: HDF5



    
    HDF5 class: High level access to hdf5 file  
    Package: class/@HDF5  
    Description: A class that allows to access the variables in HDF5 files  
    datasets by index of the elements in the array.  
    The class also include some basic tools to save and read  
    HDF5 files.  
    See also: the Util.IO.( package.  
    Input  : null  
    Output : null  
    Tested : Matlab R2014a  
    By : Eran O. Ofek                    Jan 2017  
    URL : http://weizmann.ac.il/home/eofek/matlab/  
    Reliable: 2  
      
      
      
      

### Functions List

    access_close - close and HDF5/dataset
    access_open - Open an HDF5 file/dataset for reading
    get_data - Get data from an HDF5 object Description: After creation of an HDF5 object, you can access the data in the corresponding HDF5/dataset using this function.
    get_file_var_from_htmid - Construct file and var name for HTM file stored in HDF5 Package: @HDF5 Description: Given a file base (e.g., 'UCAC4') and HTM ID and number of files in HDF5 file, construct the HDF5 file name (e.g., UCAC4_htm_032400.hdf5),
    get_nsrc - Count number of sources over all HTM in HDF5 files Package: @HDF5
    h5read - load HDF5 data using the built in h5read Package: @HDF5 Description: Identical to h5read
    htm_search_cone - Search for all HTM leafs interscting a small circle (cone search) Package: celestial.htm Description: Search for all HTM leafs interscting a small circle (i.e., cone search).
    load - load an array from a HDF5 Package: @HDF5
    load_cat - Load catalog stored in an HDF5 file Package: @HDF5 Description: Load catalog stored in an HDF5 file. Given a and catalog in HDF5 file created by HDF5.save_cat, load the catalog. The catalog is
    load_check - Load a variable from an HDF5 file or session (if exist) Package: @HDF5 Description: Load a variable from an HDF5 file, but first check if the variable name exist in the matlab session, and if it exist load it from there.
    load_htm_ind - load HTM data into structure from an HDF5 file Package: @HDF5 Description: load HTM data into structure from an HDF5 file
    load_muti_datasets - Load full multiple datasets from a single HDF5 file Package: @HDF5 Description: Load the full content of multiple datasets in a single HDF5 file into the same variable. Assuming all datasets has the same number of
    loadh - Load HDF5 file and attributes Package: @HDF5 Description: load a matrix from HDF5 file. If dataset name is not provided than will read all datasets into a structure. This function doesn't support
    read_colnames - read HDF5 catalog column names from index file Package: @HDF5
    save - save a new array into an HDF5 file dataset Package: @HDF5 Description: A simple and fast save HDF5 for arrays
    save_cat - save catalog data in HDF5 file Package: @HDF5 Description: save catalog data in HDF5 file Given a matrix containing a catalog, save the data in an HDF5 file. THe data will be saved
    save_cat_colcell - Save ColCell cell array of an HTM catalog into a MAT file Package: @HDF5
    save_htm_ind - Save HTM indinces of the celestial sphere in an HDF5 file Package: @HDF5 Description: Generate HDF5 file with HTM indices. The HTM indices contains the HTM tree and the 3 poles of the 3 great circles that defines each
    search_htm_ind - A coordinate cone search in an HTM stored in HDF5 file. Package: @HDF5 Description: A coordinate cone search in an HTM stored in HDF5 file. See also: celestial.htm.htm_search_cone
    set_type - Set HDF5 data type using the H5T.copy command Package: @HDF5
    unitTest - 
    writeatt - Write attributes into HDF5 file

### access_close

close and HDF5/dataset


    
    close and HDF5/dataset  
    Input  : - An HDF5 object  
    Output : null  
      


### access_open

Open an HDF5 file/dataset for reading


    
    Open an HDF5 file/dataset for reading  
    Input  : - HDF5 file name.  
    - HDF5 dataset name.  
    Output : - An HDF5 object containing the HDF5 and dataset ID.  
      
      


### get_data

Get data from an HDF5 object Description: After creation of an HDF5 object, you can access the data in the corresponding HDF5/dataset using this function.


    
    Get data from an HDF5 object  
    Description: After creation of an HDF5 object, you can access  
    the data in the corresponding HDF5/dataset using  
    this function.  
    Input  : - An HDF5 object.  
    - Data offset.  
    - data block.  
    Output : - Data  
    Example: get_data(H,[1000 1],[10 20])  
      
      
    User requested for specific location in the array  


### get_file_var_from_htmid

Construct file and var name for HTM file stored in HDF5 Package: @HDF5 Description: Given a file base (e.g., 'UCAC4') and HTM ID and number of files in HDF5 file, construct the HDF5 file name (e.g., UCAC4_htm_032400.hdf5),


    
    Construct file and var name for HTM file stored in HDF5  
    Package: @HDF5  
    Description: Given a file base (e.g., 'UCAC4') and HTM ID  
    and number of files in HDF5 file, construct the  
    HDF5 file name (e.g., UCAC4_htm_032400.hdf5),  
    and the data variable name (e.g., htm_032412).  
    Input  : - Catalog base name (e.g., 'UCAC4').  
    - HTM index.  
    - Number of variables in file (default is 100).  
    Output : - File name.  
    - Variable name.  
    Example: [FileName,DataName]=HDF5.get_file_var_from_htmid('UCAC4',45661,100)  
    Reliable: 2  
      
      


### get_nsrc

Count number of sources over all HTM in HDF5 files Package: @HDF5


    
    Count number of sources over all HTM in HDF5 files  
    Package: @HDF5  
    Input  : - Catalog name (e.g., 'APASSS')  
    Output : - A matrix of [HTM_index, Nsrc]  
    Example: Nsrc=HDF5.get_nsrc(CatName);  
    Reliable: 2  
      


### h5read

load HDF5 data using the built in h5read Package: @HDF5 Description: Identical to h5read


    
    load HDF5 data using the built in h5read  
    Package: @HDF5  
    Description: Identical to h5read  
    Input  : - HDF5 file name  
    - Dataset name  
    - Optional start index  
    - Optional count index  
    Output : - The data  
    Author : Eran Ofek  
      


### htm_search_cone

Search for all HTM leafs interscting a small circle (cone search) Package: celestial.htm Description: Search for all HTM leafs interscting a small circle (i.e., cone search).


    
    Search for all HTM leafs interscting a small circle (cone search)  
    Package: celestial.htm  
    Description: Search for all HTM leafs interscting a small circle  
    (i.e., cone search).  
    Input  : - Either a table of HTM data or an open HDF5 object  
    in which the HTM data is stored.  
    - Longitude [radians] to search.  
    - Latitude [radians] to search.  
    - Search radius [radians].  
    Example:  [HTM,LevList]=celestial.htm.htm_build(4);  
    ID=HDF5.htm_search_cone(HTM,1,1,0.0001)  
    Reliable : 2  
      


### load

load an array from a HDF5 Package: @HDF5


    
    load an array from a HDF5  
    Package: @HDF5  
    Input  : - HDF5 file name.  
    - Dataset name  
    - [I,J] offset in the array from which to start  
    uploading. If not given than get the entire array.  
    - [I,J] block size to upload from array.  
    Output : - An array  
      


### load_cat

Load catalog stored in an HDF5 file Package: @HDF5 Description: Load catalog stored in an HDF5 file. Given a and catalog in HDF5 file created by HDF5.save_cat, load the catalog. The catalog is


    
    Load catalog stored in an HDF5 file  
    Package: @HDF5  
    Description: Load catalog stored in an HDF5 file. Given a  
    and catalog in HDF5 file created by  
    HDF5.save_cat, load the catalog. The catalog is  
    sorted by one of the columns and it is possible  
    to retrieve only line in some range. The search  
    is done using the index data.  
    Input  : - HDF5 File name.  
    - Variable name from which to load the catalog.  
    - A two element vector of lower and upper value.  
    Only lines in which the sorted parameter is  
    between the low and high value will be retrieved.  
    - Number of columns in the catalog.  
    Default is empty (will attempt to find it).  
    Output : - A matrix containing the catalog  
    Example: Cat=HDF5.load_cat('try_cat6.hdf5','V',[0.1 0.101],20);  
    Reliable: 2  
      


### load_check

Load a variable from an HDF5 file or session (if exist) Package: @HDF5 Description: Load a variable from an HDF5 file, but first check if the variable name exist in the matlab session, and if it exist load it from there.


    
    Load a variable from an HDF5 file or session (if exist)  
    Package: @HDF5  
    Description: Load a variable from an HDF5 file, but first  
    check if the variable name exist in the matlab  
    session, and if it exist load it from there.  
    This is faster for loading large files.  
    Input  : - HDF5 file name.  
    - Variable name in the HDF5 file.  
    - Store the variable in the main work space, if doesn't exist,  
    {true|false}. Default is true.  
    - Workspace {'base'|'caller'}, Default is 'base'.  
    Output : - Loaded variable.  
    Example: Var=load_check('try.hdf5','HTM');  
    Reliable: 2  
      


### load_htm_ind

load HTM data into structure from an HDF5 file Package: @HDF5 Description: load HTM data into structure from an HDF5 file


    
    load HTM data into structure from an HDF5 file  
    Package: @HDF5  
    Description: load HTM data into structure from an HDF5 file  
    Input  : - HDF5 file name containing the HTM data.  
    - Variable name. Default is '<CatName>_HTM'.  
    Output : - A structure array containing the HTM structure.  
    Example: HTM=HDF5.load_htm_ind('try_htm.hdf5','HTM');  
    Reliable :2  
      


### load_muti_datasets

Load full multiple datasets from a single HDF5 file Package: @HDF5 Description: Load the full content of multiple datasets in a single HDF5 file into the same variable. Assuming all datasets has the same number of


    
    Load full multiple datasets from a single HDF5 file  
    Package: @HDF5  
    Description: Load the full content of multiple datasets  
    in a single HDF5 file into the same variable.  
    Assuming all datasets has the same number of  
    columns. This is a little bit faster then using  
    h5read multiple times as the file is opend once.  
    Input  : - HDF5 file name.  
    - Cell array of dataset names (starts with '/').  
    Output : - Data  
    Example: Data=HDF5.load_muti_datasets('UCAC4_htm_019100.hdf5',{'/htm_019100'});  
    Reliable: 2  
      
      


### loadh

Load HDF5 file and attributes Package: @HDF5 Description: load a matrix from HDF5 file. If dataset name is not provided than will read all datasets into a structure. This function doesn't support


    
    Load HDF5 file and attributes  
    Package: @HDF5  
    Description: load a matrix from HDF5 file.  
    If dataset name is not provided than will read all  
    datasets into a structure. This function doesn't support  
    groups.  
    This is becoming faster than matlab (2014a) for matices with  
    more than ~10^4 elements.  
    Input  : - File name.  
    - variable name (dataset). If empty or not provided than will  
    attempt to read all datasets.  
    - Get attribute. If empty then do not get attributes.  
    'h' - store attributes in an HEAD object.  
    's' - store attributes in a structure array.  
    Default is empty.  
    Output : - Datasets.  
    License: GNU general public license version 3  
    Tested : Matlab R2014a  
    By : Eran O. Ofek                    May 2015  
    URL : http://weizmann.ac.il/home/eofek/matlab/  
    Example: Data=loadh('R.hd5','R');  
    Reliable: 2  
      
      


### read_colnames

read HDF5 catalog column names from index file Package: @HDF5


    
    read HDF5 catalog column names from index file  
    Package: @HDF5  
    Input  : - HDF5 file name.  
    - Variable name. Default is '/ColNames'.  
    Output : - Cell array of column names.  
    - Structure array of column indices.  
    Example: [ColCell,Col]=HDF5.read_colnames('GAIADR1_htm.hdf5');  
      


### save

save a new array into an HDF5 file dataset Package: @HDF5 Description: A simple and fast save HDF5 for arrays


    
    save a new array into an HDF5 file dataset  
    Package: @HDF5  
    Description: A simple and fast save HDF5 for arrays  
    Input  : - An array to save.  
    - HDF5 file name to save.  
    - HDF5 dataset name. Default is '/V'.  
    - A two column cell array of attribute key,val.  
    Author : Eran Ofek  
      


### save_cat

save catalog data in HDF5 file Package: @HDF5 Description: save catalog data in HDF5 file Given a matrix containing a catalog, save the data in an HDF5 file. THe data will be saved


    
    save catalog data in HDF5 file  
    Package: @HDF5  
    Description: save catalog data in HDF5 file  
    Given a matrix containing a catalog, save the  
    data in an HDF5 file. THe data will be saved  
    under two variable names in the HDF5 file.  
    /<base>_Cat will contain the catalog, while  
    /<base>_Ind will contain an index data.  
    The index data contains two columns [Ind Val],  
    where Val is the values of the sorted column  
    at the line index specified by Ind. Ind are in  
    steps given by the StepRows parameter.  
    Input  : - File name  
    - Base variable name.  
    The actual name will be <base>_Cat and <base>_Ind.  
    - Matrix containing the data to save  
    - Column index by which to sort the catalog.  
    - Number of rows step by for which to save the index  
    data. Default is 30.  
    Outout : null  
    Example: HDF5.save_cat('try_cat.hdf5','V',Data,2,1000);  
    Reliable: 2  
      


### save_cat_colcell

Save ColCell cell array of an HTM catalog into a MAT file Package: @HDF5


    
    Save ColCell cell array of an HTM catalog into a MAT file  
    Package: @HDF5  
    Input  : - Catalog name (e.g., 'APASS')  
    - ColCell cell array  
    - ColUnits cell array  
    Reliable : 2  
      


### save_htm_ind

Save HTM indinces of the celestial sphere in an HDF5 file Package: @HDF5 Description: Generate HDF5 file with HTM indices. The HTM indices contains the HTM tree and the 3 poles of the 3 great circles that defines each


    
    Save HTM indinces of the celestial sphere in an HDF5 file  
    Package: @HDF5  
    Description: Generate HDF5 file with HTM indices.  
    The HTM indices contains the HTM tree and the 3  
    poles of the 3 great circles that defines each  
    HTM.  
    Input  : - Either a structure of HTM to save (created by  
    celestial.htm.htm_build), or the HTM level.  
    - HDF5 File name in which to store the HTM indices.  
    - Variable name in which to store the data.  
    Default is '<CatName>_HTM'  
    - Cell array of attribute {Key,Val} to save  
    in a 'ColCell' variable name.  
    - Nsrc matrix [IndHTM Nsrc]  
    Output : null  
    Example: HDF5.save_htm_ind(7,'try_htm.hdf5',[],{},Nsrc)  
    Reliable: 2  
      


### search_htm_ind

A coordinate cone search in an HTM stored in HDF5 file. Package: @HDF5 Description: A coordinate cone search in an HTM stored in HDF5 file. See also: celestial.htm.htm_search_cone


    
    A coordinate cone search in an HTM stored in HDF5 file.  
    Package: @HDF5  
    Description: A coordinate cone search in an HTM stored in HDF5 file.  
    See also: celestial.htm.htm_search_cone  
    Input  : - An HDF5 file name or an open HDF5 object, in which  
    the HTM indices are stored.  
    - Variable name. If empty, default is <CatName>_HTM.  
    - Search longitude [radians].  
    - Search latitude [radians].  
    - Search radius [radians].  
    Example: ID=HDF5.search_htm_ind('UCAC4_htm.hdf5',[],1,1,0.001)  
    Reliable: 2  
      
      


### set_type

Set HDF5 data type using the H5T.copy command Package: @HDF5


    
    Set HDF5 data type using the H5T.copy command  
    Package: @HDF5  
    Input  : - Data value  
    Output : - TypeID  
      
      


### unitTest




    
      


### writeatt

Write attributes into HDF5 file


    
    Write attributes into HDF5 file  
    Input  : - FileName  
    - Dataset name  
    - Cell array of pairs of attributes: key,val,...  


