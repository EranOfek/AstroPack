# Class: celestial.mpDB



    
    mpDB static class  
    Package: +celestial/@mpDB  
    Description: A static class for local minor planets ephemerides files.  
    Instellation: The OS environment variable mpDB_dir contains the directory  
    in which the AsteroidsEphemDB HDF5 files resides  
    (e.g., '/euler/eran/work/AsteroidsEphemDB').  
    We recomend to set the value of this environment variable  
    in the starup.m file (i.e., using setenv.m).  
    Input  : null  
    Output : null  
    Tested : Matlab R2018b  
    By : Eran O. Ofek                    Oct 2019  
    URL : http://weizmann.ac.il/home/eofek/matlab/  
    Reliable: 2  
      
      
      

### Functions List

    astType2index - AstType file 'n','u','c','p', to index and vise versa. Package: +celestial/@mpDB
    fit_poly2cat - Fit a yearly position polynomials to JPL ephemerides Package: +celestial/@mpDB Description: Given an AstCat object generated by celestial.mpDB.jpl_generate_1obj_ephem and contains ephemerides of single object, fit
    generateAllAstEphemFiles - generate all AstEphem files Package: +celestial/@mpDB Description: generate all AstEphem files, including the ObjReferenceFile.mat file. Example: celestial.mpDB.generateAllAstEphemFiles('ObjType',2)
    generateAstEphemFiles - generate AstEphem files with ephmerides and polynomial fits Package: +celestial/@mpDB Description: generate an AstEphem files in HDF5 format. Each file contains the ephemerides for 'NinFile' objects (/Cat dataset) and polynomial fits of
    generateCatOfAstEphemFiles - Generate a catalog of AstEphem files in the mpDB_dir Package: +celestial/@mpDB Description: Generate a catalog of AstEphem files in the mpDB_dir directory. The ID vector contains:
    get.PolyDB - 
    getenvDir - get AsteroidsEphemDB files directory from env. var. Package: +celestial/@mpDB Output : - String of directory Example: celestial.mpDB.getenvDir
    jpl_generate_1obj_ephem - Generate JPL ephemerides for one object Package: +celestial/@mpDB Description: Generate JPL ephemerides for one object
    loadEphemFile - Construct Ephem file name and load data Package: +celestial/@mpDB Description:
    load_all_poly - Load the 10th deg polynomial of MP coordinates for one tear. Package: +celestial/@mpDB Description: Load the 10th deg polynomial of MP coordinates for one tear.
    setenvDir - set AsteroidsEphemDB files directory in env. var. 'mpDB_dir' Package: +celestial/@mpDB
    unitTest - mpDB.unitTest

### astType2index

AstType file 'n','u','c','p', to index and vise versa. Package: +celestial/@mpDB


    
    AstType file 'n','u','c','p', to index and vise versa.  
    Package: +celestial/@mpDB  
    Input  : - A character, or an index.  
    Output : - Index or character.  
    Example: celestial.mpDB.astType2index('c')  
    celestial.mpDB.astType2index(3)  
      


### fit_poly2cat

Fit a yearly position polynomials to JPL ephemerides Package: +celestial/@mpDB Description: Given an AstCat object generated by celestial.mpDB.jpl_generate_1obj_ephem and contains ephemerides of single object, fit


    
    Fit a yearly position polynomials to JPL ephemerides  
    Package: +celestial/@mpDB  
    Description: Given an AstCat object generated by  
    celestial.mpDB.jpl_generate_1obj_ephem and  
    contains ephemerides of single object, fit  
    yearly polynomials to the cosine directions of  
    the object.  
    Input  : * Arbitrary number of pairs of arguments: ...,keyword,value,...  
    where keyword are one of the followings:  
    'YearStart' - Default is 2017.  
    'YearEnd'   - Default is 2021.  
    'TimeBuffer' - Additional days before/after  
    start/end year.  
    Output : - A structure array in which each element  
    corresponds to one year. The following fields are  
    available:  
    'MaxD' - maximum deviation between the polynomial  
    and ephmerides [radians].  
    'ParCX' - Polynomials for the cosine-direction in  
    X coordinate.  
    Time is measured in Julian years relative  
    to Jan 1st of the year.  
    Example: [Cat]=celestial.mpDB.jpl_generate_1obj_ephem;  
    PolyDB=celestial.mpDB.fit_poly2cat(Cat);  
      
      
      


### generateAllAstEphemFiles

generate all AstEphem files Package: +celestial/@mpDB Description: generate all AstEphem files, including the ObjReferenceFile.mat file. Example: celestial.mpDB.generateAllAstEphemFiles('ObjType',2)


    
    generate all AstEphem files  
    Package: +celestial/@mpDB  
    Description: generate all AstEphem files, including  
    the ObjReferenceFile.mat file.  
    Example: celestial.mpDB.generateAllAstEphemFiles('ObjType',2)  
      


### generateAstEphemFiles

generate AstEphem files with ephmerides and polynomial fits Package: +celestial/@mpDB Description: generate an AstEphem files in HDF5 format. Each file contains the ephemerides for 'NinFile' objects (/Cat dataset) and polynomial fits of


    
    generate AstEphem files with ephmerides and polynomial fits  
    Package: +celestial/@mpDB  
    Description: generate an AstEphem files in HDF5 format.  
    Each file contains the ephemerides for 'NinFile'  
    objects (/Cat dataset) and polynomial fits of  
    positions in each year (/Poly04d dataset).  
    Input  : * Arbitrary number of pairs of arguments: ...,keyword,value,...  
    where keyword are one of the followings:  
    'ObjName' - Object name. Name, or number.  
    For numbered asteroids use e.g., '1;'.  
    'AstIndex'- This is an index number (e.g., object ID)  
    that will be added as column  
    'AstIndex' to the catalog.  
    Default is 1.  
    'FileType'  - Default is 'n'.  
    'YearStart' - Default is 2017.  
    'YearEnd'   - Default is 2021.  
    'StepSize'  - Step size. Default is 8.  
    'StepSizeUnits' - Step size units. Default is 'h'.  
    'CENTER'    - Observer position.  
    '500' - Geocentric.  
    Default is '675' (i.e., Palomar).  
    'TimeBuffer' - Additional days before/after  
    start/end year.  
    'PauseAfterError' - Default is 300 s.  
    'NinFile' - Default is 1000.  
    Example:  
    celestial.mpDB.generateAstEphemFiles('ObjectNames',(1:1:10),'AstIndex',(1:1:10),'NinFile',5);  
    celestial.mpDB.generateAstEphemFiles('ObjectNames',(541001:1:541132),'AstIndex',(541001:1:541132),'NinFile',1000);  
      
      
      


### generateCatOfAstEphemFiles

Generate a catalog of AstEphem files in the mpDB_dir Package: +celestial/@mpDB Description: Generate a catalog of AstEphem files in the mpDB_dir directory. The ID vector contains:


    
    Generate a catalog of AstEphem files in the mpDB_dir  
    Package: +celestial/@mpDB  
    Description: Generate a catalog of AstEphem files in the  
    mpDB_dir directory.  
    The ID vector contains:  
    [AstType, YearStart, YearEnd, Nstart, Nend]  
    Input  : * Arbitrary number of pairs of arguments: ...,keyword,value,...  
    where keyword are one of the followings:  
    'BaseFileName' - Default is 'AstEphem_[nucp]_\w+.hdf5'.  
    'Save'         - File name in which to save the  
    catalog. If empty, then do  not  
    save. Default is  
    'EphemCatalog.mat'.  
    Output : - Structure array of all identified files, with the  
    following fields:  
    'ID' - The ID vector contains:  
    [AstType, YearStart, YearEnd, Nstart, Nend]  
    'FileName' - File name.  
    Example: Cat=celestial.mpDB.generateCatOfAstEphemFiles  
    Reliable: 2  
      
      


### get.PolyDB




    
      
      


### getenvDir

get AsteroidsEphemDB files directory from env. var. Package: +celestial/@mpDB Output : - String of directory Example: celestial.mpDB.getenvDir


    
    get AsteroidsEphemDB files directory from env. var.  
    Package: +celestial/@mpDB  
    Output : - String of directory  
    Example: celestial.mpDB.getenvDir  
      


### jpl_generate_1obj_ephem

Generate JPL ephemerides for one object Package: +celestial/@mpDB Description: Generate JPL ephemerides for one object


    
    Generate JPL ephemerides for one object  
    Package: +celestial/@mpDB  
    Description: Generate JPL ephemerides for one object  
    Input  : * Arbitrary number of pairs of arguments: ...,keyword,value,...  
    where keyword are one of the followings:  
    'ObjName' - Object name. Name, or number.  
    For numbered asteroids use e.g., '1;'.  
    'AstIndex'- This is an index number (e.g., object ID)  
    that will be added as column  
    'AstIndex' to the catalog.  
    Default is 1.  
    'YearStart' - Default is 2017.  
    'YearEnd'   - Default is 2021.  
    'StepSize'  - Step size. Default is 8.  
    'StepSizeUnits' - Step size units. Default is 'h'.  
    'CENTER'    - Observer position.  
    '500' - Geocentric.  
    Default is '675' (i.e., Palomar).  
    'TimeBuffer' - Additional days before/after  
    start/end year.  
    'PauseAfterError' - Default is 300 s.  
    Output : - A catalog with object epehmerides.  
    Example: [Cat]=celestial.mpDB.jpl_generate_1obj_ephem  
      
    Defaults  


### loadEphemFile

Construct Ephem file name and load data Package: +celestial/@mpDB Description:


    
    Construct Ephem file name and load data  
    Package: +celestial/@mpDB  
    Description:  
    Input  : - ID [AstTypeIndex, StartYear, EndYear, StartObj, EndObj]  
    where AstTypeIndex is the index corresponding to  
    'nucp' (see astType2index.m).  
    - Dataset type:  
    'poly' - polynomial approximation of RA/Dec  
    'ephem' - Full epehmerides. (Default).  
    'ind' - ephemerides index file.  
    - The year of the polynomial file.  
    Mandatory if If 'poly' option is selected.  
    Output : - File name.  
    - Dataset name.  
    - Data.  
    Example:  
    [FileName,DataSet,Data]=celestial.mpDB.loadEphemFile([1 2017 2020 363001 364000],'ephem');  
    Reliable: 2  
      


### load_all_poly

Load the 10th deg polynomial of MP coordinates for one tear. Package: +celestial/@mpDB Description: Load the 10th deg polynomial of MP coordinates for one tear.


    
    Load the 10th deg polynomial of MP coordinates for one tear.  
    Package: +celestial/@mpDB  
    Description: Load the 10th deg polynomial of MP coordinates  
    for one tear.  
    Input  : - Year for which the polynomials are relevant.  
    * Arbitrary number of pairs of arguments: ...,keyword,value,...  
    where keyword are one of the followings:  
    'EphemCatalog' - EphemCatalog as input, in this  
    case the PolyS will not be loaded.  
    Output : - A structure containing the following fields:  
    'CD1' - A mtaritx of polynomials representing the  
    1st cosine direction. Line per asteroid,  
    10 columns.  
    'CD2' - A mtaritx of polynomials representing the  
    2nd cosine direction.  
    'CD3' - A mtaritx of polynomials representing the  
    3rd cosine direction.  
    'MaxDist' - Maximal deviation between the  
    polynomial representation and the true  
    position of the asteroid. [Radians].  
    Example: PolyS=celestial.mpDB.load_all_poly(2017);  
    Reliable: 2  
      
      


### setenvDir

set AsteroidsEphemDB files directory in env. var. 'mpDB_dir' Package: +celestial/@mpDB


    
    set AsteroidsEphemDB files directory in env. var. 'mpDB_dir'  
    Package: +celestial/@mpDB  
    Input : - String of directory  
    Default is '/euler/eran/work/AsteroidsEphemDB'  
    Example: celestial.mpDB.setenvDir  
      


### unitTest

mpDB.unitTest


    
    mpDB.unitTest  
      


