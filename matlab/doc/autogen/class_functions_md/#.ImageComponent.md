# Class: ImageComponent



    
      
### ImageComponent

ImageComponent constructor


    
    ImageComponent constructor  
    Input  : - Either: Image name to read; image name to read  
    with wild cards or regular expressions;  
    a cell array of image names; a cell array of  
    image matrices, or a vector of ImageComponent size  
    (creates an empty array).  
    Default is [1 1].  
    * ...,key,val,...  
    'Scale' - Image scaling, which will be used to  
    rescale the Data to the full image.  
    Default is [].  
    'HDU' - FITS HDU. Default is 1.  
    'UseRegExp' - Logical indicating if to use regexp  
    when using io.files.filelist.  
    Default is false.  
    Output : - An ImageComponent object  
    Author : Eran Ofek (Apr 2021)  
    Example: IC = ImageComponent;  
    IC = ImageComponent([2 2]);  
    IC = ImageComponent({rand(10,10), rand(2,2)});  
    IC = ImageComponent({rand(10,10), rand(2,2)},'Scale',5);  
    IC = ImageComponent('*.fits')  
      
### background

Estimate the background and variance of an ImageComponent


    
    Estimate the background and variance of an ImageComponent  
    Input  : - An ImageComponent (multi element suppoted)  
    The back/var are estimated from the 'Image'  
    property.  
    * Additional arguments to pass to:  
    imUtil.background.background  
    Default is no parameters.  
    Output : - A BackImage with the estimated background in the  
    Data property.  
    - A VarImage with the estimated variance in the  
    Data property.  
    Author : Eran Ofek (Apr 2021)  
    Example: IC = ImageComponent({100+randn(1000,1000), 50+randn(100,100)})  
    [B,V] = background(IC);  
      
### cast

Cast the image data in ImageComponent (transform to a new type)


    
    Cast the image data in ImageComponent (transform to a new type)  
    Input  : - An ImageComponent object.  
    - A char array containing the new type.  
    Default is 'single'.  
    - Indicating if the output  
    is a new copy of the input (true), or an  
    handle of the input (false).  
    If empty (default), then this argument will  
    be set by the number of output args.  
    If 0, then false, otherwise true.  
    This means that IC.fun, will modify IC,  
    while IB=IC.fun will generate a new copy in  
    IB.  
    Output : - An ImageComponent object in which the image 'Data'  
    is transformed into the new type.  
    Author : Eran Ofek (May 2021)  
    Example: IC = ImageComponent({rand(10,10)});  
    cast(IC,'single')  
      
### coadd

coadd images in an ImageComponent object including pre/post normalization and variance


    
    coadd images in an ImageComponent object including pre/post  
    normalization and variance  
    Input  : - An ImageComponent object.  
    * ...,key,val,...  
    'CCDSEC' - [Xmin Xmax Ymin Ymax] to stack.  
    If empty, use entire image. Default is  
    [].  
    'SubBack' - A logical indicating if to subtract  
    background using the background command.  
    Default is false.  
    'BackArgs' - A cell array of background arguments.  
    Default is {}.  
    'SubMethod' - Either a vector of numbers to  
    subtract from each image, or a function  
    handle which is gettug a cube, and  
    returining a new cube.  
    Default is empty (do nothing).  
    'SubArgs' - A cell array of additional arguments  
    to pass to the 'SubMethod' function.  
    Default is {}.  
    'NormMethod' - Eiher a vector of numbrers (one per  
    image) for normalizing the images after  
    subtraction and prior to stacking,  
    or a function handle that get a cube and  
    return a vector of numbers.  
    If empty do nothing (default).  
    'NormArgs' - A cell array of additional arguments  
    to pass to the 'NormMethod' function.  
    Default is {}.  
    'NormOperator' - The operator that will used with  
    the normalization values. Default is  
    @times.  
    'VarImage' - An ImageComponent of the variance  
    images. Default is [].  
    'StackMethod' - Stacking method. Options are:  
    'sum'  
    ['mean']  
    'median'  
    'var'  
    'rvar'  
    'min'  
    'max'  
    'range'  
    'quantile' - rquires a quqntile argument.  
    'wmean'  
    'sigmaclip' - for arguments see: imUtil.image.mean_sigclip  
    'wsigmaclip' - for arguments see: imUtil.image.wmean_sigclip  
    'bitor' - bit-wise or operation. Return only Coadd.  
    'bitand' - bit-wise and operation. Return only Coadd.  
    'bitnot' - bit-wise not operation. Return only Coadd.  
    'StackArgs' - A cell array of arguments to pass to the  
    method function. Default is {}.  
    'EmpiricalVarFun' - Default is @var.  
    'EmpiricalVarFunArgs' - Default is {[],3,'omitnan'}.  
    'MedianVarCorrForEmpirical' - A logical indicating if to  
    correct the variance calculation by the ratio between  
    the variance of the median and variance of the mean.  
    Default is false.  
    'DivideEmpiricalByN' - A logical indicating if to divide  
    CoaddVarEmpirical by N. Default is false.  
    'DivideVarByN' - A logical indicating if to divide  
    CoaddVar by N. Default is false.  
    'CalcCoaddVarEmpirical' - Logical indicating if to calc the  
    CoaddVarEmpirical. Default is true.  
    'CalcCoaddVar' - Logical indicating if to calc the  
    CoaddVar. Default is true.  
    'CalcCoaddN' - Logical indicating if to calc the  
    CoaddN. Default is true.  
    'NormEnd' - Eiher a vector of numbrers (one per  
    image) for normalizing the images after  
    stacking,  
    or a function handle that get a cube and  
    return a vector of numbers.  
    If empty do nothing (default).  
    'NormEndArgs' - A cell array of additional arguments  
    to pass to the 'NormEnd' function.  
    Default is {}.  
    'NormEndOperator' - The operator that will used with  
    the normalization values. Default is  
    @rdivide.  
    'DataPropIn' - Data property on which to  
    operate in the ImageComponent.  
    Default is 'Data'.  
    'OutIsMat' - A logical indicating if the output  
    is matrix or some image object.  
    Default is false.  
    'CoaddClass' - Class for the coadd image (if  
    OutIsMat=false). Default is @SciImage.  
    'CoaddVarEmpiricalClass' - Default is @VarImage.  
    'CoaddVarClass' - Default is @VarImage.  
    'CoaddNClass' - Default is @VarImage.  
    Output : - Coadd image.  
    - CoaddVarEmpirical - This is the empirical variance of the  
    data. In case the variance of the mean is needed set DivideEmpiricalByN  
    to true.  
    - CoaddVar - This is the variance of the  
    data. In case the variance of the mean is needed set DivideByN  
    to true.  
    - CoaddN - This is the number of images used in the stacking of  
    each pixel.  
    Author : Eran Ofek (Apr 2021)  
    Example: IC = ImageComponent({2.*randn(100,100), 2.*randn(100,100), 2.*randn(100,100)})  
    Var = ImageComponent({4.*ones(100,100), 4.*ones(100,100), 4.*ones(100,100)})  
    [Coadd, CoaddVarEmpirical, CoaddVar, CoaddN] = coadd(IC);  
    [Coadd, CoaddVarEmpirical, CoaddVar, CoaddN] = coadd(IC,'StackMethod','wmean','VarImage',Var);  
    [Coadd, CoaddVarEmpirical, CoaddVar, CoaddN] =  
    coadd(IC,'SubMethod',[10 10 10]);  
    mean(CoaddVarEmpirical.Image,'all') should be close  
    to 4  
    [Coadd, CoaddVarEmpirical, CoaddVar, CoaddN] =  
    coadd(IC,'SubMethod',[10 10 10],'NormMethod',[0.5  
    0.5 0.5]);  mean(CoaddVarEmpirical.Image,'all')  
    should be close to 1  
    [Coadd, CoaddVarEmpirical, CoaddVar, CoaddN] = coadd(IC,'SubMethod',[10 10 10],'NormMethod',[0.5 0.5 0.5],'NormEnd',5);  mean(CoaddVarEmpirical.Image,'all')  
    mean(Coadd.Image,'all') should be near -25  
    mean(CoaddVarEmpirical.Image,'all') should be near  
    25  
    [Coadd, CoaddVarEmpirical, CoaddVar, CoaddN]=coadd(IC,'SubMethod',-100,'NormEnd',@median,'NormEndArgs',{'all'},'NormEndOperator',@rdivide);  
    mean(Coadd.Image,'all') should be near 1  
      
      
    THIS FUNCTION REQUIRES FURTHER TESTING!!!!  
      
### crop

Crop an ImageComponent object. Either apply multiple trims to a single image, or a single trime to multiple images, or multiple trims to multiple images (one to one). Update also the CCDSEC propery.


    
    Crop an ImageComponent object. Either apply multiple trims to  
    a single image, or a single trime to multiple images,  
    or multiple trims to multiple images (one to one).  
    Update also the CCDSEC propery.  
    Input  : - An ImageComponent object.  
    - Either [minX, maxX, minY, maxY] (Type='ccdsec')  
    or [Xcenter, Ycenter, Xhalfsize, Yhalfsize] (Type = 'center')  
    or [Xhalfsize, Yhalfsize] (Type = 'center').  
    * ..., key, val,...  
    'Type' - ['ccdsec'] | 'center'  
    'DataPropIn' - Data property on which to operate.  
    Default is 'Data'.  
    'CreateNewObj' - Indicating if the output  
    is a new copy of the input (true), or an  
    handle of the input (false).  
    If empty (default), then this argument will  
    be set by the number of output args.  
    If 0, then false, otherwise true.  
    This means that IC.fun, will modify IC,  
    while IB=IC.fun will generate a new copy in  
    IB.  
    Output : - An ImageComponent object with the cropped images.  
    Author : Eran Ofek (Apr 2021)  
    Example: IC=ImageComponent({rand(5,5),2.*rand(5,5),3.*ones(5,5)});  
    Res = crop(IC,[1 2 1 3])  
      
### cutouts

Break a single image to a cube of cutouts around given positions including optional sub pixel shift.


    
    Break a single image to a cube of cutouts around given positions  
    including optional sub pixel shift.  
    Input  : - A single element ImageComponent object.  
    - A two column matrix of [X, Y] positions around  
    which to generate the cutouts.  
    * ...,key,val,...  
    'HalfSize' - Cutout half size (actual size will be  
    1+2*HalfSize. Default is 8.  
    'PadVal' - padding value for cutouts near edge or  
    without circular shifts.  
    'CutAlgo' - Algorithm: ['mex'] | 'wmat'.  
    'IsCircle' - If true then will pad each cutout  
    with NaN outside the HalfSize radius.  
    Default is false.  
    'Shift' - A logical indicating if to shift  
    'ShiftAlgo' - Shift algorithm ['lanczos3'] |  
    'lanczos2' | 'fft'.  
    'IsCircFilt' - While using lanczos, is circshift  
    is circular or not. Default is false.  
    'DataProp' - Data property from which to extract  
    the cutouts. Default is 'Image'.  
    Outout : - A cube of size 1+2*HalfSize X 1+2*HalfSize X  
    numberOfCutouts. each layer contain a cutout  
    and 3rd dim is for cutout index.  
    - A two column matrix of the actual positions  
    [X,Y], around which the cutouts are extracted.  
    These may be rounded if 'RoundPos' is set to true.  
    Author : Eran Ofek (Apr 2021)  
    Example: IC = ImageComponent({rand(1000,1000)});  
    XY = rand(10000,2).*900 + 50;  
    Cube = cutouts(IC, XY);  
    Cube = cutouts(IC, XY,'Shift',true);  
    Cube = cutouts(IC, XY,'Shift',true,'IsCircFilt',true);  
      
### funBinary

Apply a binary operator to ImageComponent objects CCDSEC is updated according to CCDSEC1.


    
    Apply a binary operator to ImageComponent objects  
    CCDSEC is updated according to CCDSEC1.  
    Input  : - The 1st ImageComponent object.  
    Number of elements must be equal or larger than  
    the number of elements in the 2nd input.  
    - The 2nd ImageComponent object, or alternatively  
    a cell array of images,  
    or an array of numerical values.  
    The array  
    size must be consistent with the image size in the  
    first object.  
    - Binary operator (e.g., @plus)  
    * ...,key,val,...  
    'OpArgs' - A cell array of additional arguments to  
    pass to the operator. Default is {}.  
    'CreateNewObj' - Indicating if the output  
    is a new copy of the input (true), or an  
    handle of the input (false).  
    If empty (default), then this argument will  
    be set by the number of output args.  
    If 0, then false, otherwise true.  
    This means that IC.fun, will modify IC,  
    while IB=IC.fun will generate a new copy in  
    IB.  
    'CCDSEC1' - [Xmin Xmax Ymin Ymax] CCDSEC for the  
    1st oprand. The Operator will be applied  
    only on this section.  
    If empty, use all image. Default is [].  
    'CCDSEC2' - The same as CCDSEC1, but for the 2nd  
    operand. Default is [].  
    'OutOnlyCCDSEC' - A logical indicating if the  
    output include only the CCDSEC, or the  
    entire image (in which only the CCDSEC  
    region was modified).  
    Default is true.  
    'DataPropIn1' - Data property for 1st operand.  
    Default is 'Data'.  
    If CCDSEC is not empty, then this will be  
    modified into 'Image'.  
    'DataPropIn2' - Like DataPropIn1, but for the 2nd  
    operand. If empty, use the value in  
    DataPrope1'. Default is ''.  
    'DataPropOut' - Data property for the output  
    object. If empty, use the value in  
    DataPrope1'. Default is ''.  
    Author : Eran Ofek (Apr 2021)  
    Example: IC  = ImageComponent({rand(10,10)})  
    R   = funBinary(IC,IC,@plus,'CreateNewObj',true)  
    R   = funBinary([IC,IC],1,@plus,'CreateNewObj',true)  
    IC1 = ImageComponent({rand(2,2)});  
    IC2 = ImageComponent({rand(2,2)});  
    R   = funBinary([IC1,IC2],{1 2},@plus,'CreateNewObj',true)  
    IC  = ImageComponent({rand(10,10), rand(2,2)},'Scale',5)  
    R   = funBinary(IC,3,@times,'CreateNewObj',true)  
    IC  = ImageComponent({rand(10,10), rand(2,2)},'Scale',5)  
    R   = funBinary(IC,3,@times,'CreateNewObj',false)  
    IC  = ImageComponent({rand(10,10), rand(10,10)},'Scale',5)  
    IB  = funBinary(IC,IC(1),@plus,'CreateNewObj',true)  
    IC  = ImageComponent({rand(10,10), rand(10,10)},'Scale',5)  
    IB  = funBinary(IC,IC(1),@plus,'CreateNewObj',true, 'CCDSEC1',[2 3 2 4],'CCDSEC2',[2 3 3 5])  
    IB  = funBinary(IC,IC(1),@plus,'CreateNewObj',true, 'CCDSEC1',[2 3 2 4],'CCDSEC2',[2 3 2 4],'OutOnlyCCDSEC',true)  
    IB  = funBinary(IC,IC(1),@plus,'CreateNewObj',true, 'CCDSEC1',[2 3 2 4],'CCDSEC2',[2 3 2 4],'OutOnlyCCDSEC',false)  
      
### funCutouts

Apply function (that returns a scalar) on image cutouts


    
    Apply function (that returns a scalar) on image cutouts  
    Input  : - A single-element ImageComponent object.  
    - A two column matrix of [X, Y] positions.  
    Positions will be rounded.  
    - A function handle to operate on each cutout.  
    The function must returns a scalar.  
    * ...,key,val,...  
    'FunArgs' - A cell array of additional arguments  
    to pass to the function. Default is {}.  
    'HalfSize' - Cutout half size (actual size will be  
    1+2*HalfSize. Default is 8.  
    'PadVal' - Padding value. Default is NaN.  
    'CutAlgo' - Algorithm: ['mex'] | 'wmat'.  
    'IsCircle' - If true then will pad each cutout  
    with NaN outside the HalfSize radius.  
    Default is false.  
    'DataProp' - Data property from which to extract  
    the cutouts. Default is 'Image'.  
    Output : - A column vector of function output per each  
    cutout.  
    Author : Eran Ofek (Jul 2021)  
    Example: IC=ImageComponent({uint16(ones(100,100))});  
    Result = funCutouts(IC, [1 1; 2 2; 10 10; 30 30], @tools.array.bitor_array)  
    IC=ImageComponent({uint32(ones(100,100))});  
    Result = funCutouts(IC, [1 1; 2 2; 10 10; 30 30], @tools.array.bitor_array,'CutAlgo','wmat')  
      
### funStack

Simple stack (coadd) images in an ImageComponent object without pre/post normalization


    
    Simple stack (coadd) images in an ImageComponent object without pre/post normalization  
    Input  : - An ImageComponent object.  
    * ...,key,val,...  
    'CCDSEC' - [Xmin Xmax Ymin Ymax] to stack.  
    If empty, use entire image. Default is  
    [].  
    'VarImage' - An ImageComponent of the variance  
    images. Default is [].  
    'StackMethod' - Stacking method. Options are:  
    'sum'  
    ['mean']  
    'median'  
    'var'  
    'rvar'  
    'min'  
    'max'  
    'range'  
    'quantile' - rquires a quqntile argument.  
    'wmean'  
    'sigmaclip' - for arguments see: imUtil.image.mean_sigclip  
    'wsigmaclip' - for arguments see: imUtil.image.wmean_sigclip  
    'bitor' - bit-wise or operation. Return only Coadd.  
    'bitand' - bit-wise and operation. Return only Coadd.  
    'bitnot' - bit-wise not operation. Return only Coadd.  
    'StackArgs' - A cell array of arguments to pass to the  
    method function. Default is {}.  
    'EmpiricalVarFun' - Default is @var.  
    'EmpiricalVarFunArgs' - Default is {[],3,'omitnan'}.  
    'MedianVarCorrForEmpirical' - A logical indicating if to  
    correct the variance calculation by the ratio between  
    the variance of the median and variance of the mean.  
    Default is false.  
    'DivideEmpiricalByN' - A logical indicating if to divide  
    CoaddVarEmpirical by N. Default is false.  
    'DivideVarByN' - A logical indicating if to divide  
    CoaddVar by N. Default is false.  
    'CalcCoaddVarEmpirical' - Logical indicating if to calc the  
    CoaddVarEmpirical. Default is true.  
    'CalcCoaddVar' - Logical indicating if to calc the  
    CoaddVar. Default is true.  
    'CalcCoaddN' - Logical indicating if to calc the  
    CoaddN. Default is true.  
    'DataPropIn' - Data property on which to  
    operate in the ImageComponent.  
    Default is 'Data'.  
    'OutIsMat' - A logical indicating if the output  
    is matrix or some image object.  
    Default is false.  
    'CoaddClass' - Class for the coadd image (if  
    OutIsMat=false). Default is @SciImage.  
    'CoaddVarEmpiricalClass' - Default is @VarImage.  
    'CoaddVarClass' - Default is @VarImage.  
    'CoaddNClass' - Default is @VarImage.  
    Output : - Coadd image.  
    - CoaddVarEmpirical - This is the empirical variance of the  
    data. In case the variance of the mean is needed set DivideEmpiricalByN  
    to true.  
    - CoaddVar - This is the variance of the  
    data. In case the variance of the mean is needed set DivideByN  
    to true.  
    - CoaddN - This is the number of images used in the stacking of  
    each pixel.  
    Author : Eran Ofek (Apr 2021)  
    Example: IC = ImageComponent({2.*randn(100,100), 2.*randn(100,100), 2.*randn(100,100)})  
    Var = ImageComponent({4.*ones(100,100), 4.*ones(100,100), 4.*ones(100,100)})  
    [Coadd, CoaddVarEmpirical, CoaddVar, CoaddN] = funStack(IC);  
    [Coadd, CoaddVarEmpirical, CoaddVar, CoaddN] = coadd(IC,'StackMethod','wmean','VarImage',Var);  
      
### funUnary

funUnary on ImageComponent Update CCDSEC accordingly.


    
    funUnary on ImageComponent  
    Update CCDSEC accordingly.  
    Input  : - An ImageComponent object (multi elemenets supported).  
    - Unary operator (e.g., @median, @sin)  
    * ...,key,val,...  
    'OpArgs' - A cell array of additional arguments to  
    pass to the operator. Default is {}.  
    'CreateNewObj' - Indicating if the output  
    is a new copy of the input (true), or an  
    handle of the input (false).  
    If empty (default), then this argument will  
    be set by the number of output args.  
    If 0, then false, otherwise true.  
    This means that IC.fun, will modify IC,  
    while IB=IC.fun will generate a new copy in  
    IB.  
    'CCDSEC' - CCDSEC on which to operate:  
    [Xmin, Xmax, Ymin, Ymax].  
    Use [] for the entire image.  
    If not [], then DataPropIn/Out will be  
    modified to 'Image'.  
    'OutOnlyCCDSEC' - A logical indicating if the  
    output include only the CCDSEC region, or  
    it is the full image (where the opeartor,  
    operated only on the CCDSEC region).  
    Default is true.  
    'DataPropIn' - Data property in which the operator  
    will be operated. Default is 'Data'.  
    'DataPropOut' - Data property in which the result  
    will be stored. Default is 'Data'.  
    Output : - An ImageComponent object.  
    Author : Eran Ofek (Apr 2021)  
    Example: IC = ImageComponent({rand(10,10), rand(5,4)},'Scale',5)  
    IC.funUnary(@sin);  
    IC.funUnary(@median,'OpArgs',{'all','omitnan'});  
    IC = ImageComponent({rand(10,10), rand(5,4)},'Scale',5)  
    IC.funUnary(@median,'OpArgs',{'all','omitnan'},'CCDSEC',[1 2 1 3]);  
    IC = ImageComponent({rand(10,10), rand(5,4)},'Scale',5)  
    IC.funUnary(@tanh,'CCDSEC',[1 2 1 3]);  
    IC.funUnary(@tanh,'CCDSEC',[1 2 1 3],'OutOnlyCCDSEC',true);  
      
      
### funUnaryScalar

funUnary on ImageComponent returning an array of scalars (one scalar per image)


    
    funUnary on ImageComponent returning an array of scalars (one  
    scalar per image)  
    Input  : - An ImageComponent object (multi elemenets supported).  
    - Unary operator (e.g., @median, @sin)  
    * ...,key,val,...  
    'OpArgs' - A cell array of additional arguments to  
    pass to the operator. Default is {}.  
    'CCDSEC' - CCDSEC on which to operate:  
    [Xmin, Xmax, Ymin, Ymax].  
    Use [] for the entire image.  
    If not [], then DataPropIn/Out will be  
    modified to 'Image'.  
    'DataPropIn' - Data property in which the operator  
    will be operated. Default is 'Data'.  
    Output : - An array in which each element corresponds to the operator applied  
    to an element in the ImageComponent object.  
    If operator returns empty, then this function will  
    return NaN.  
    Author : Eran Ofek (Apr 2021)  
    Example: IC = ImageComponent({rand(10,10), rand(5,4)},'Scale',5)  
    R = IC.funUnaryScalar(@median,'OpArgs',{'all','omitnan'});  
    IC = ImageComponent({rand(10,10), rand(5,4)},'Scale',5)  
    R = IC.funUnaryScalar(@median,'OpArgs',{'all','omitnan'},'CCDSEC',[1 2 1 3]);  
      
      
### get.Cols




    
### get.Image

getter for Image (rescale Data)


    
    getter for Image (rescale Data)  
      
    if isempty(Obj.VecX) || isempty(Obj.VecY) || isempty(Obj.SizeIJ)  
### get.Rows




    
### getImageByKey




    
### image2subimages

break an image in a single element ImageComponent into sub images.


    
    break an image in a single element ImageComponent into sub images.  
    Input  : - An ImageComponent object with a single element.  
    If the image is scaled, then will rescale the  
    image (i.e., will use the 'Image' property).  
    - BlockSize [X, Y] of sub images. or [X] (will be copied as [X, X]).  
    If empty, will use imUtil.image.subimage_grid  
    * ...,key,val,...  
    'CCDSEC' - A 4 column matrix of CCDSEC  
    [Xmin, Xmax, Ymin, Ymax]. Each line  
    represent one output sub image boundries.  
    If empty, will use BlockSize.  
    If given, override BlockSize.  
    Default is [].  
    'Nxy' - Number of sub images in each axis  
    (e.g., [10 10]). If given this will  
    override BlckSize.  
    Default is [].  
    'OverlapXY' - Overlapping buffer [X, Y].  
    Default is 10 pix.  
    Output : - A multiple element ImageComponent object. Each  
    element contains one sub image. The output is  
    always a new ImageCompinent object (i.e., the  
    input ImageComponent is not modified).  
    - EdgesCCDSEC : CCDSEC matrix of the ouput subimages.  
    - ListCenters : list of [X,Y] centers of sub images.  
    - NoOverlapCCDSEC: CCDSEC matrix of the non  
    overlapping regions of the sub images.  
    Author : Eran Ofek (Mar 2021)  
    Example: IC=ImageComponent; IC.Image=rand(1000,1000);  
    [Result,EdgesCCDSEC,ListCenters,NoOverlapCCDSEC] = image2subimages(IC,[256 256]);  
      
### imageComponent2AstroImage

Convert an ImageComponet to AstroImage


    
    Convert an ImageComponet to AstroImage  
    Input  : - An ImageComponent object  
    - Data property in the AstroImage in which to store the  
    ImageComponent object. Default is 'ImageData'.  
    - CreateNewObj. Default is true.  
    Output : - An AstroImage object  
    Author : Eran Ofek (Apr 2021)  
    Example: IC = ImageComponent({ones(3,3), zeros(3,3)});  
    AI = IC.imageComponent2AstroImage;  
      
### images2cube

Generate a cube of images from ImageComponent object


    
    Generate a cube of images from ImageComponent object  
    Input  : - An ImageComponent object (multi elements  
    supported).  
    * ...,key,val,...  
    'CCDSEC' - A 4 column matrix of CCDSEC of each  
    image in ImageComponent to insert into the  
    cube [Xmin, Xmax, Ymin, Ymax].  
    If single line, then use the same CCDSEC  
    for all images. If empty, use entore image.  
    Default is [].  
    'DataPropIn' - Data property from which to take  
    the image. Default is 'Image'.  
    'DimIndex' - Cube dimension of the image index.  
    Either 1 or 3. Default is 3.  
    'Class'    - Force thr output to be of some class.  
    If empty will use the first object class.  
    Default is empty.  
    Output : - A cube of images.  
    Author : Eran Ofek (Apr 2021)  
    Example: IC=ImageComponent({ones(5,5),2.*ones(5,5),3.*ones(5,5)});  
    Cube = images2cube(IC)  
    Cube = images2cube(IC,'CCDSEC',[1 2 2 4])  
    IC=ImageComponent({ones(5,5),2.*ones(7,7),3.*ones(8,8)},'Scale',5);  
    Cube = images2cube(IC,'CCDSEC',[1 2 2 4])  
    Cube = images2cube(IC,'CCDSEC',[1 2 2 4; 1 2 2 4; 2 3 3 5])  
      
### imresize

resize image data using matlab imresize function


    
    resize image data using matlab imresize function  
    Input  : - An ImageComponent object  
    - Rescaling factor or [rows, columns] in the ouput  
    image. If empty, then will attempt to take this  
    parameter from the ImageComponent object Scale  
    property, and if this is also empty, then will do  
    nothing.  
    * ...,key,val,...  
    'Method' - see imresize for methods options.  
    Default is 'lanczos3'.  
    'UpdateObj' - If true then will store the resized  
    image also in the Data propery and set the  
    scale to []. Default is false.  
    Output : - A resized image (matrix).  
    Example: Result = imresize(Obj, Scale)  
      
      
### imrotate

Apply imrotate (image rotation) in ImageComponent object Set CCDSEC to [].


    
    Apply imrotate (image rotation) in ImageComponent object  
    Set CCDSEC to [].  
    Input  : - An ImageComponent object.  
    - Rotation angle [deg].  
    * ...,key,val,...  
    'Method' - imrotate interpolation method.  
    Default is 'bicubic'.  
    'BBox' - imrotate bounding box ['loose'] | 'crop'.  
    'DataProp' - Data prop on which to apply the  
    rotation. Default is 'Image'.  
    'CreateNewObj' - Indicating if the output  
    is a new copy of the input (true), or an  
    handle of the input (false).  
    If empty (default), then this argument will  
    be set by the number of output args.  
    If 0, then false, otherwise true.  
    This means that IC.fun, will modify IC,  
    while IB=IC.fun will generate a new copy in  
    IB.  
    * Additional parameters to pass to imrotate:  
    Angle(deg), Method, BBOX.  
    Default is 'nearest', 'loose'  
    Output : - An ImageComponent object with the rotated images.  
    Author : Eran Ofek (Apr 2021)  
    Example: IC=ImageComponent({rand(10,10)});  
    IC.imrotate(10)  
      
### isemptyImage

Check if images data in ImageComponent are empty (true if empty). Result is an array (element per image element). Example: IC = ImageComponent({rand(0,1), rand(10,12)}); isemptyImage(IC)


    
    Check if images data in ImageComponent are empty (true if  
    empty). Result is an array (element per image element).  
    Example: IC = ImageComponent({rand(0,1), rand(10,12)});  
    isemptyImage(IC)  
      
### replace

Replace values in range in image with a new value and generate a flag image of replaced pixels


    
    Replace values in range in image with a new value and generate a flag image of replaced pixels  
    Input  : - An ImageComponent object.  
    - A two column matrix of min/max ranges, or a single  
    column vector of values.  
    Any value in the image in this range <=/>= will be  
    replaced.  
    - A vector of new values that will replace the old  
    values. If scalar, then will use the same value  
    for all ranges.  
    For vector, value can be NaN.  
    * ...,key,val,...  
    'Eps' - A value to subtract to the lower range and add to  
    the upper range prior to comparison. This is  
    useful in order to avoid problems with comparison  
    of floating point numbers. Default is 0.  
    'CreateNewObj' - Indicating if the output  
    is a new copy of the input (true), or an  
    handle of the input (false).  
    If empty (default), then this argument will  
    be set by the number of output args.  
    If 0, then false, otherwise true.  
    This means that IC.fun, will modify IC,  
    while IB=IC.fun will generate a new copy in  
    IB.  
    Output : - The same object, but with the updated values.  
    - An ImageComponent in which the image contains  
    logical indicating which pixels were replaced.  
    Author : Eran Ofek (Mar 2021)  
    Example: [Obj,ObjReplaced] = replace(Obj, Range, NewVal);  
      
### set.Data

setter for Data - store in Data


    
    setter for Data - store in Data  
### set.Image

setter for image - store in Data and set Scale to []


    
    setter for image - store in Data and set Scale to []  
### sizeImage

get size of all images/data


    
    get size of all images/data  
    Input  : - An ImageComponent object (multi elements supported).  
    - Property name for wich the size is requested.  
    Default is 'Image'.  
    Output : arrays [Nx] and [Ny] of all images.  
    Example: IC = ImageComponent({rand(10,12)});  
    [Nx, Ny] = IC.sizeImage  
      
### subimages2image

break image to sub images


    
    break image to sub images  
      
    consider writing a new version of:  
    [FullImage]=imUtil.image.subimages2image(SubImage,CCDSEC);  
### subtractBack

subtract background from an ImageComponent If this is a SciImage, then also set the IsBackSubtracted to true.


    
    subtract background from an ImageComponent  
    If this is a SciImage, then also set the IsBackSubtracted  
    to true.  
    Input  : - An ImageComponet object.  
    - Background, either in ImageComponent, a matrix or  
    a cell array of matrices. If empty, cal back.  
    Default is [].  
    * Additional arguments to pass to the background  
    function. Default is no arguments.  
    Output : - A background subtracted ImageComponent  
    Author : Eran Ofek (Apr 2021)  
    Example:  
      
      
### unitTest

unitTest for ImageComponent


    
    unitTest for ImageComponent  
